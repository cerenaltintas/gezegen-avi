<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üåå √ñtegezegen Ke≈üif Sistemi</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
            color: white;
            padding: 40px;
            text-align: center;
        }

        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
        }

        .header p {
            font-size: 1.2em;
            opacity: 0.9;
        }

        .tabs {
            display: flex;
            background: #f5f5f5;
            border-bottom: 2px solid #ddd;
        }

        .tab {
            flex: 1;
            padding: 20px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s;
            font-weight: bold;
            border: none;
            background: none;
            font-size: 1em;
        }

        .tab:hover {
            background: #e0e0e0;
        }

        .tab.active {
            background: white;
            color: #667eea;
            border-bottom: 3px solid #667eea;
        }

        .content {
            padding: 40px;
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
            animation: fadeIn 0.5s;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .form-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .form-group {
            display: flex;
            flex-direction: column;
        }

        .form-group label {
            font-weight: bold;
            margin-bottom: 8px;
            color: #333;
        }

        .form-group input, .form-group select {
            padding: 12px;
            border: 2px solid #ddd;
            border-radius: 8px;
            font-size: 1em;
            transition: border-color 0.3s;
        }

        .form-group input:focus, .form-group select:focus {
            outline: none;
            border-color: #667eea;
        }

        .form-group small {
            color: #666;
            margin-top: 5px;
        }

        .btn {
            padding: 15px 40px;
            font-size: 1.1em;
            font-weight: bold;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s;
            display: inline-block;
        }

        .btn-primary {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(102, 126, 234, 0.4);
        }

        .btn-secondary {
            background: #6c757d;
            color: white;
        }

        .btn-secondary:hover {
            background: #5a6268;
        }

        .result-box {
            margin-top: 30px;
            padding: 30px;
            border-radius: 10px;
            display: none;
            animation: slideDown 0.5s;
        }

        @keyframes slideDown {
            from { opacity: 0; transform: translateY(-20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .result-box.exoplanet {
            background: linear-gradient(135deg, #11998e 0%, #38ef7d 100%);
            color: white;
        }

        .result-box.not-exoplanet {
            background: linear-gradient(135deg, #ee0979 0%, #ff6a00 100%);
            color: white;
        }

        .result-box h2 {
            font-size: 2em;
            margin-bottom: 15px;
        }

        .result-box .probability {
            font-size: 1.5em;
            margin: 10px 0;
        }

        .progress-bar {
            width: 100%;
            height: 30px;
            background: rgba(255, 255, 255, 0.3);
            border-radius: 15px;
            overflow: hidden;
            margin: 20px 0;
        }

        .progress-fill {
            height: 100%;
            background: white;
            transition: width 1s ease-out;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
        }

        .file-upload {
            border: 3px dashed #667eea;
            border-radius: 10px;
            padding: 40px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s;
            margin-bottom: 20px;
        }

        .file-upload:hover {
            background: #f8f9ff;
            border-color: #764ba2;
        }

        .file-upload input {
            display: none;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-top: 30px;
        }

        .stat-card {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 25px;
            border-radius: 10px;
            text-align: center;
        }

        .stat-card h3 {
            font-size: 2.5em;
            margin-bottom: 10px;
        }

        .stat-card p {
            font-size: 1em;
            opacity: 0.9;
        }

        .feature-list {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            gap: 15px;
            margin-top: 20px;
        }

        .feature-item {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 8px;
            border-left: 4px solid #667eea;
        }

        .feature-item strong {
            color: #667eea;
        }

        .loading {
            display: none;
            text-align: center;
            margin: 20px 0;
        }

        .loading.active {
            display: block;
        }

        .spinner {
            border: 4px solid #f3f3f3;
            border-top: 4px solid #667eea;
            border-radius: 50%;
            width: 50px;
            height: 50px;
            animation: spin 1s linear infinite;
            margin: 0 auto;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .info-box {
            background: #e7f3ff;
            border-left: 4px solid #2196F3;
            padding: 20px;
            border-radius: 8px;
            margin-bottom: 20px;
        }

        .info-box h3 {
            color: #2196F3;
            margin-bottom: 10px;
        }

        footer {
            background: #2a5298;
            color: white;
            text-align: center;
            padding: 20px;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üåå √ñtegezegen Ke≈üif Sistemi</h1>
            <p>Profesyonel veri analitiƒüi ile √∂tegezegen tespit s√ºrecinizi modernle≈ütirin.</p>
        </div>

        <div class="tabs">
            <button class="tab active" onclick="showTab('manual')">üìù Manuel Giri≈ü</button>
            <button class="tab" onclick="showTab('csv')">üìÑ CSV Y√ºkle</button>
            <button class="tab" onclick="showTab('info')">‚ÑπÔ∏è Model Bilgileri</button>
            <button class="tab" onclick="showTab('synth')">üß™ Veri √úretimi</button>
        </div>

        <div class="content">
            <!-- Manuel Giri≈ü Sekmesi -->
            <div id="manual" class="tab-content active">
                <div class="info-box">
                    <h3>üìä Manuel Veri Giri≈üi</h3>
                    <p>A≈üaƒüƒ±daki formu doldurarak yeni bir gezegen adayƒ±nƒ±n √∂tegezegen olup olmadƒ±ƒüƒ±nƒ± tahmin edebilirsiniz. T√ºm deƒüerler opsiyoneldir; eksik deƒüerler otomatik olarak i≈ülenir.</p>
                </div>

                <form id="predictForm">
                    <div class="form-grid">
                        <div class="form-group">
                            <label>Y√∂r√ºnge Periyodu (g√ºn)</label>
                            <input type="number" step="any" name="koi_period" placeholder="√∂rn: 3.52">
                            <small>Gezegenin yƒ±ldƒ±zƒ± √ßevreleme s√ºresi</small>
                        </div>

                        <div class="form-group">
                            <label>Ge√ßi≈ü Derinliƒüi (ppm)</label>
                            <input type="number" step="any" name="koi_depth" placeholder="√∂rn: 615.8">
                            <small>I≈üƒ±k eƒürisindeki d√º≈ü√º≈ü miktarƒ±</small>
                        </div>

                        <div class="form-group">
                            <label>Ge√ßi≈ü S√ºresi (saat)</label>
                            <input type="number" step="any" name="koi_duration" placeholder="√∂rn: 2.95">
                            <small>Ge√ßi≈üin toplam s√ºresi</small>
                        </div>

                        <div class="form-group">
                            <label>Gezegen Yarƒ±√ßapƒ± (D√ºnya yarƒ±√ßapƒ±)</label>
                            <input type="number" step="any" name="koi_prad" placeholder="√∂rn: 1.89">
                            <small>D√ºnya yarƒ±√ßapƒ± cinsinden</small>
                        </div>

                        <div class="form-group">
                            <label>Gezegen-Yƒ±ldƒ±z Yarƒ±√ßap Oranƒ±</label>
                            <input type="number" step="any" name="koi_ror" placeholder="√∂rn: 0.0174">
                            <small>Rp/R* oranƒ±</small>
                        </div>

                        <div class="form-group">
                            <label>Denge Sƒ±caklƒ±ƒüƒ± (K)</label>
                            <input type="number" step="any" name="koi_teq" placeholder="√∂rn: 1284">
                            <small>Kelvin cinsinden</small>
                        </div>

                        <div class="form-group">
                            <label>G√ºne≈ü I≈üƒ±nƒ±mƒ±</label>
                            <input type="number" step="any" name="koi_insol" placeholder="√∂rn: 62.3">
                            <small>D√ºnya ƒ±≈üƒ±nƒ±mƒ±na g√∂re</small>
                        </div>

                        <div class="form-group">
                            <label>Yƒ±ldƒ±z Sƒ±caklƒ±ƒüƒ± (K)</label>
                            <input type="number" step="any" name="koi_steff" placeholder="√∂rn: 5455">
                            <small>Etkin sƒ±caklƒ±k</small>
                        </div>

                        <div class="form-group">
                            <label>Yƒ±ldƒ±z Yoƒüunluƒüu (g/cm¬≥)</label>
                            <input type="number" step="any" name="koi_srho" placeholder="√∂rn: 4.11">
                            <small>Gram/cm¬≥ cinsinden</small>
                        </div>

                        <div class="form-group">
                            <label>Yƒ±ldƒ±z Yarƒ±√ßapƒ± (G√ºne≈ü yarƒ±√ßapƒ±)</label>
                            <input type="number" step="any" name="koi_srad" placeholder="√∂rn: 0.927">
                            <small>G√ºne≈ü yarƒ±√ßapƒ± cinsinden</small>
                        </div>

                        <div class="form-group">
                            <label>Yƒ±ldƒ±z Y√ºzey Yer√ßekimi (log10)</label>
                            <input type="number" step="any" name="koi_slogg" placeholder="√∂rn: 4.467">
                            <small>cm/s¬≤ cinsinden</small>
                        </div>

                        <div class="form-group">
                            <label>Etki Parametresi</label>
                            <input type="number" step="any" name="koi_impact" placeholder="√∂rn: 0.146">
                            <small>Y√∂r√ºnge geometrisi</small>
                        </div>

                        <div class="form-group">
                            <label>Sinyal-G√ºr√ºlt√º Oranƒ±</label>
                            <input type="number" step="any" name="koi_model_snr" placeholder="√∂rn: 35.8">
                            <small>Model SNR</small>
                        </div>

                        <div class="form-group">
                            <label>Gezegen Numarasƒ±</label>
                            <input type="number" step="1" name="koi_tce_plnt_num" value="1" placeholder="√∂rn: 1">
                            <small>Sistemdeki gezegen sƒ±rasƒ±</small>
                        </div>

                        <div class="form-group">
                            <label>Transit Dƒ±≈üƒ± FP Bayraƒüƒ±</label>
                            <select name="koi_fpflag_nt">
                                <option value="0">0 - Hayƒ±r</option>
                                <option value="1">1 - Evet</option>
                            </select>
                        </div>

                        <div class="form-group">
                            <label>Yƒ±ldƒ±z Tutulmasƒ± FP Bayraƒüƒ±</label>
                            <select name="koi_fpflag_ss">
                                <option value="0">0 - Hayƒ±r</option>
                                <option value="1">1 - Evet</option>
                            </select>
                        </div>

                        <div class="form-group">
                            <label>Merkez Sapmasƒ± FP Bayraƒüƒ±</label>
                            <select name="koi_fpflag_co">
                                <option value="0">0 - Hayƒ±r</option>
                                <option value="1">1 - Evet</option>
                            </select>
                        </div>

                        <div class="form-group">
                            <label>Kontaminasyon FP Bayraƒüƒ±</label>
                            <select name="koi_fpflag_ec">
                                <option value="0">0 - Hayƒ±r</option>
                                <option value="1">1 - Evet</option>
                            </select>
                        </div>
                    </div>

                    <div style="text-align: center;">
                        <button type="submit" class="btn btn-primary">üîÆ Tahmin Et</button>
                        <button type="reset" class="btn btn-secondary">üîÑ Sƒ±fƒ±rla</button>
                    </div>
                </form>

                <div class="loading" id="loading">
                    <div class="spinner"></div>
                    <p style="margin-top: 15px;">Tahmin yapƒ±lƒ±yor...</p>
                </div>

                <div id="result" class="result-box"></div>
            </div>

            <!-- CSV Y√ºkleme Sekmesi -->
            <div id="csv" class="tab-content">
                <div class="info-box">
                    <h3>üìÅ Toplu Tahmin</h3>
                    <p>CSV dosyasƒ± y√ºkleyerek birden fazla gezegen adayƒ± i√ßin toplu tahmin yapabilirsiniz. Dosyanƒ±z manuel giri≈üteki √∂zellikleri i√ßermelidir.</p>
                    
                    <div style="margin-top: 15px; padding: 10px; background: #e3f2fd; border-left: 4px solid #2196F3; border-radius: 5px;">
                        <strong>üîí G√ºvenlik √ñnlemleri:</strong>
                        <ul style="margin: 10px 0 0 20px;">
                            <li>‚úÖ Sadece CSV dosyalarƒ± kabul edilir</li>
                            <li>‚úÖ Maksimum dosya boyutu: 100 MB</li>
                            <li>üîê Hassas bilgiler otomatik olarak anonimle≈ütirilir</li>
                        </ul>
                    </div>
                </div>

                <div class="form-group" style="margin: 20px 0;">
                    <label style="display: flex; align-items: center; gap: 10px; cursor: pointer;">
                        <input type="checkbox" id="anonymizeData" checked style="width: 20px; height: 20px; cursor: pointer;">
                        <span style="font-weight: bold;">üîí Veriyi Anonimle≈ütir</span>
                    </label>
                    <small style="display: block; margin-top: 5px; color: #666;">
                        Hassas bilgiler (ID'ler, isimler, koordinatlar) otomatik olarak anonimle≈ütirilir
                    </small>
                </div>

                <div class="file-upload" onclick="document.getElementById('csvFile').click()">
                    <h3>üì§ CSV Dosyasƒ± Y√ºkle</h3>
                    <p>Dosyanƒ±zƒ± buraya s√ºr√ºkleyin veya tƒ±klayƒ±n</p>
                    <p style="color: #999; font-size: 0.9em; margin-top: 5px;">Sadece .csv formatƒ±</p>
                    <input type="file" id="csvFile" accept=".csv" onchange="uploadCSV(this)">
                </div>

                <div class="loading" id="csvLoading">
                    <div class="spinner"></div>
                    <p style="margin-top: 15px;">Dosya i≈üleniyor...</p>
                </div>

                <div id="csvResults"></div>
            </div>

            <!-- Model Bilgileri Sekmesi -->
            <div id="info" class="tab-content">
                <div class="info-box">
                    <h3>ü§ñ Model Hakkƒ±nda</h3>
                    <p>Bu sistem, NASA Kepler misyonundan elde edilen verileri kullanarak XGBoost (Extreme Gradient Boosting) algoritmasƒ± ile eƒüitilmi≈ütir. Model, √∂tegezegen tespitinde y√ºksek doƒüruluk oranƒ±na sahiptir.</p>
                </div>

                <h2 style="margin: 30px 0 20px 0;">‚≠ê En √ñnemli √ñzellikler</h2>
                <div id="featureList" class="feature-list">
                    <p>Model bilgileri y√ºkleniyor...</p>
                </div>

                <h2 style="margin: 30px 0 20px 0;">üìä Kullanƒ±lan Teknolojiler</h2>
                <div class="feature-list">
                    <div class="feature-item">
                        <strong>XGBoost</strong><br>
                        Gradient Boosting algoritmasƒ±
                    </div>
                    <div class="feature-item">
                        <strong>SMOTE</strong><br>
                        Dengesiz veri dengeleme
                    </div>
                    <div class="feature-item">
                        <strong>Scikit-learn</strong><br>
                        Makine √∂ƒürenimi k√ºt√ºphanesi
                    </div>
                    <div class="feature-item">
                        <strong>Flask</strong><br>
                        Web framework
                    </div>
                </div>
            </div>

            <!-- Sentetik Veri Sekmesi -->
            <div id="synth" class="tab-content">
                <div class="info-box">
                    <h3>üß™ Sentetik Veri √úretim Laboratuvarƒ±</h3>
                    <p>Ger√ßek Kepler daƒüƒ±lƒ±mƒ±na sadƒ±k kalarak yeni √∂tegezegen adaylarƒ± √ºretmek i√ßin hibrit
                       (Gauss karƒ±≈üƒ±mƒ± + SMOTE) yakla≈üƒ±mƒ± kullanƒ±yoruz. Bu veri setleri modelinizi g√º√ßlendirmek
                       veya farklƒ± senaryolarƒ± test etmek i√ßin idealdir.</p>
                </div>

                <div class="stats-grid">
                    <div class="stat-card">
                        <h3>3</h3>
                        <p>√úretim Stratejisi</p>
                    </div>
                    <div class="stat-card">
                        <h3>0.99</h3>
                        <p>Hedef ROC AUC</p>
                    </div>
                    <div class="stat-card">
                        <h3>¬±1%</h3>
                        <p>Sƒ±nƒ±f Oranƒ± Sapmasƒ±</p>
                    </div>
                    <div class="stat-card">
                        <h3>0.55</h3>
                        <p>Hedef ROC AUC</p>
                    </div>
                </div>

                <div class="info-box">
                    <h3>‚öôÔ∏è Komut Satƒ±rƒ±</h3>
                    <p>A≈üaƒüƒ±daki komut ile hƒ±zlƒ±ca yeni veri √ºretebilirsiniz:</p>
                    <pre>python data_generator.py --samples 3000 --strategy hybrid --preview</pre>
                    <p>√áƒ±ktƒ± <strong>synthetic_exoplanets.csv</strong> dosyasƒ±na kaydedilir.</p>
                </div>

                <div class="info-box" style="background: #d4edda; border-color: #28a745;">
                    <h3>üé® Streamlit Laboratuvarƒ±</h3>
                    <p>Daha ileri deneyler i√ßin <strong>streamlit_app.py</strong> i√ßindeki "üß™ Veri √úretimi" sekmesini
                       kullanarak √∂rnek sayƒ±sƒ±nƒ±, hedef sƒ±nƒ±f oranƒ±nƒ± ve √ºretim stratijisini interaktif olarak belirleyin.</p>
                    <ul>
                        <li>Veri kaynaƒüƒ± olarak varsayƒ±lan Kepler setini veya kendi CSV'nizi se√ßin</li>
                        <li>Aykƒ±rƒ± deƒüerleri otomatik kƒ±rpma se√ßeneƒüiyle kaliteli daƒüƒ±lƒ±mlar elde edin</li>
                        <li>√úretilen veriyi tek tƒ±kla CSV olarak indirin</li>
                    </ul>
                </div>
            </div>
        </div>

        <footer>
            <p>üåå √ñtegezegen Ke≈üif Sistemi | NASA Kepler Verileri | ¬© 2025</p>
            <p style="margin-top: 10px; opacity: 0.8;">Yapay Zeka ile Desteklenmi≈ütir</p>
        </footer>
    </div>

    <script>
        // Sekme deƒüi≈ütirme
        function showTab(tabName) {
            // T√ºm sekmeleri gizle
            document.querySelectorAll('.tab-content').forEach(content => {
                content.classList.remove('active');
            });
            document.querySelectorAll('.tab').forEach(tab => {
                tab.classList.remove('active');
            });

            // Se√ßili sekmeyi g√∂ster
            document.getElementById(tabName).classList.add('active');
            event.target.classList.add('active');

            // Model bilgileri sekmesiyse, bilgileri y√ºkle
            if (tabName === 'info') {
                loadModelInfo();
            }
        }

        // Manuel tahmin formu
        document.getElementById('predictForm').addEventListener('submit', async (e) => {
            e.preventDefault();

            // Y√ºkleniyor g√∂ster
            document.getElementById('loading').classList.add('active');
            document.getElementById('result').style.display = 'none';

            // Form verilerini al
            const formData = new FormData(e.target);

            try {
                const response = await fetch('/predict', {
                    method: 'POST',
                    body: formData
                });

                const result = await response.json();

                // Y√ºkleniyor gizle
                document.getElementById('loading').classList.remove('active');

                if (result.success) {
                    displayResult(result);
                } else {
                    alert('Hata: ' + result.error);
                }
            } catch (error) {
                document.getElementById('loading').classList.remove('active');
                alert('Bir hata olu≈ütu: ' + error);
            }
        });

        // Sonucu g√∂ster
        function displayResult(result) {
            const resultDiv = document.getElementById('result');
            const isExoplanet = result.is_exoplanet;
            const probability = (result.probability_exoplanet * 100).toFixed(2);
            const confidence = (result.confidence * 100).toFixed(2);

            resultDiv.className = 'result-box ' + (isExoplanet ? 'exoplanet' : 'not-exoplanet');
            
            resultDiv.innerHTML = `
                <h2>${isExoplanet ? 'üéâ √ñTEGEZEGEN!' : '‚ùå √ñTEGEZEGEN DEƒûƒ∞L'}</h2>
                <p class="probability">√ñtegezegen Olma Olasƒ±lƒ±ƒüƒ±: ${probability}%</p>
                <div class="progress-bar">
                    <div class="progress-fill" style="width: ${probability}%">${probability}%</div>
                </div>
                <p style="font-size: 1.2em; margin-top: 15px;">
                    G√ºven Skoru: ${confidence}%
                </p>
                <p style="margin-top: 20px; opacity: 0.9;">
                    ${isExoplanet 
                        ? 'Bu veri noktasƒ± doƒürulanmƒ±≈ü bir √∂tegezegen √∂zelliklerine sahip!' 
                        : 'Bu veri noktasƒ± √∂tegezegen olarak sƒ±nƒ±flandƒ±rƒ±lmadƒ±.'}
                </p>
                <p style="margin-top: 10px; font-size: 0.9em; opacity: 0.8;">
                    Tahmin Zamanƒ±: ${result.timestamp}
                </p>
            `;

            resultDiv.style.display = 'block';
        }

        // CSV y√ºkleme
        async function uploadCSV(input) {
            if (!input.files || !input.files[0]) return;

            const file = input.files[0];
            
            // Dosya t√ºr√º kontrol√º
            if (!file.name.toLowerCase().endsWith('.csv')) {
                alert('‚ùå Ge√ßersiz dosya t√ºr√º!\n\nSadece CSV dosyalarƒ± kabul edilir.\n\nY√ºklemeye √ßalƒ±≈ütƒ±ƒüƒ±nƒ±z dosya: ' + file.name);
                input.value = ''; // Input'u temizle
                return;
            }
            
            // Dosya boyutu kontrol√º (100 MB)
            const maxSize = 100 * 1024 * 1024; // 100 MB in bytes
            if (file.size > maxSize) {
                alert('‚ùå Dosya √ßok b√ºy√ºk!\n\nMaksimum dosya boyutu: 100 MB\n\nDosya boyutu: ' + (file.size / (1024 * 1024)).toFixed(2) + ' MB');
                input.value = ''; // Input'u temizle
                return;
            }
            
            const formData = new FormData();
            formData.append('file', file);
            
            // Anonimle≈ütirme se√ßeneƒüini ekle
            const anonymize = document.getElementById('anonymizeData').checked;
            formData.append('anonymize', anonymize ? 'true' : 'false');

            document.getElementById('csvLoading').classList.add('active');
            document.getElementById('csvResults').innerHTML = '';

            try {
                const response = await fetch('/predict_csv', {
                    method: 'POST',
                    body: formData
                });

                const result = await response.json();

                document.getElementById('csvLoading').classList.remove('active');

                if (result.success) {
                    displayCSVResults(result);
                } else {
                    alert('Hata: ' + result.error);
                }
            } catch (error) {
                document.getElementById('csvLoading').classList.remove('active');
                alert('Bir hata olu≈ütu: ' + error);
            } finally {
                input.value = ''; // Aynƒ± dosyanƒ±n tekrar y√ºklenmesine izin vermek i√ßin
            }
        }

        // CSV sonu√ßlarƒ±nƒ± g√∂ster
        function displayCSVResults(result) {
            const resultsDiv = document.getElementById('csvResults');

            const exoplanetPercentage = ((result.exoplanets_found / result.total_rows) * 100).toFixed(1);
            const avgConfidence = (result.average_confidence * 100).toFixed(2);
            
            // Anonimle≈ütirme bilgisi
            let anonymizationInfo = '';
            if (result.anonymization && result.anonymization.enabled) {
                anonymizationInfo = `
                    <div style="background: #e8f5e9; padding: 15px; border-radius: 8px; margin: 20px 0; border-left: 4px solid #4caf50;">
                        <strong>üîí Veri Anonimle≈ütirme Uygulandƒ±</strong>
                        <p style="margin: 5px 0 0 0;">
                            ${result.anonymization.columns_anonymized} s√ºtun anonimle≈ütirildi: 
                            <span style="font-family: monospace; color: #1565c0;">
                                ${result.anonymization.column_names.join(', ')}
                            </span>
                        </p>
                    </div>
                `;
            }

            let html = `
                <div style="background: #f5f5f5; padding: 15px; border-radius: 8px; margin-bottom: 20px;">
                    <strong>üìÅ Dosya:</strong> ${result.filename || 'Y√ºklenen dosya'}
                </div>
                
                ${anonymizationInfo}
                
                <div class="stats-grid">
                    <div class="stat-card">
                        <h3>${result.total_rows}</h3>
                        <p>Toplam Analiz</p>
                    </div>
                    <div class="stat-card">
                        <h3>${result.exoplanets_found}</h3>
                        <p>√ñtegezegen Bulundu</p>
                    </div>
                    <div class="stat-card">
                        <h3>${exoplanetPercentage}%</h3>
                        <p>√ñtegezegen Oranƒ±</p>
                    </div>
                    <div class="stat-card">
                        <h3>${avgConfidence}%</h3>
                        <p>Ortalama G√ºven</p>
                    </div>
                </div>

                <h3 style="margin: 30px 0 15px 0;">üìä Detaylƒ± Sonu√ßlar (ƒ∞lk 100)</h3>
                <div style="overflow-x: auto;">
                    <table style="width: 100%; border-collapse: collapse; background: white;">
                        <thead>
                            <tr style="background: #667eea; color: white;">
                                <th style="padding: 12px; text-align: left;">Satƒ±r</th>
                                <th style="padding: 12px; text-align: left;">Sonu√ß</th>
                                <th style="padding: 12px; text-align: left;">Olasƒ±lƒ±k</th>
                                <th style="padding: 12px; text-align: left;">G√ºven</th>
                            </tr>
                        </thead>
                        <tbody>
            `;

            result.results.forEach(row => {
                const bgColor = row.is_exoplanet ? '#d4edda' : '#f8d7da';
                const textColor = row.is_exoplanet ? '#155724' : '#721c24';
                const icon = row.is_exoplanet ? '‚úÖ' : '‚ùå';

                html += `
                    <tr style="background: ${bgColor}; color: ${textColor};">
                        <td style="padding: 10px;">${row.row}</td>
                        <td style="padding: 10px;">${icon} ${row.is_exoplanet ? '√ñtegezegen' : 'Deƒüil'}</td>
                        <td style="padding: 10px;">${(row.probability * 100).toFixed(2)}%</td>
                        <td style="padding: 10px;">${(row.confidence * 100).toFixed(2)}%</td>
                    </tr>
                `;
            });

            html += `
                        </tbody>
                    </table>
                </div>
            `;

            resultsDiv.innerHTML = html;
        }

        // Model bilgilerini y√ºkle
        async function loadModelInfo() {
            try {
                const response = await fetch('/model_info');
                const result = await response.json();

                if (result.success) {
                    let html = '';
                    result.top_features.forEach((feature, index) => {
                        const percentage = (feature.importance * 100).toFixed(2);
                        html += `
                            <div class="feature-item">
                                <strong>#${index + 1} ${feature.name}</strong><br>
                                √ñnem: ${percentage}%
                            </div>
                        `;
                    });

                    document.getElementById('featureList').innerHTML = html;
                }
            } catch (error) {
                console.error('Model bilgileri y√ºklenemedi:', error);
            }
        }

        // Sayfa y√ºklendiƒüinde model bilgilerini y√ºkle
        window.addEventListener('load', () => {
            loadModelInfo();
        });
    </script>
</body>
</html>
